<script id="vs-entity" type="notjs">
    attribute vec4 position;
    attribute vec4 color;

    varying lowp vec4 vColor;

    void main() {
      vColor = color;
      gl_Position = position;
    } 

</script>
<script id="fs-entity" type="notjs">
    precision mediump float;
    varying lowp vec4 vColor;

    void main() {
      // gl_FragColor is a special variable a fragment shader
      // is responsible for setting
      // gl_FragColor = vec4(0, 0, 0, 1); // return redish-purple
      gl_FragColor = vColor;
    }

</script>

<script id="vs-lab" type="notjs">
    attribute vec4 position;
    attribute vec4 color;

    uniform float time;
    uniform vec2 middle;

    varying lowp vec4 vColor;

    void main() {
      vColor = color;
      //sin(time) * x, cos(time) * y 
      float diffAngle = radians(time);
      // float s = sin(radians(time));
      float absX = (middle.x - position.x);
      float absY = abs(middle.y - position.y);

      float radius = sqrt(pow(absX, 2.) + pow(absY, 2.));
      float currentAngle = acos(absX / radius);
      float newAngle = currentAngle + diffAngle;

      gl_Position = vec4(
          (cos(newAngle) * radius) * 2. / 600. - 1.,
          (sin(newAngle) * radius) * 2. / 600. - 1.,
          position.z,
          1
      );

      // (number) * (2) / (600) - 1;

      // vec2 translation = vec2(.04, .1);
      // vec2 newPosition = rotatedPosition + translation;

      // vec2 resolution = vec2(400.,400.);
      // vec2 zeroToOne = newPosition / resolution;

      // // convert from 0->1 to 0->2
      // vec2 zeroToTwo = zeroToOne * 2.0;

      // // convert from 0->2 to -1->+1 (clipspace)
      // vec2 clipSpace = zeroToTwo - 1.0;

      // gl_Position = vec4(clipSpace * vec2(-1, 1), position.z, 1);
      // gl_Position = vec4(rotatedPosition, position.z, 1);
    } 

</script>
<script id="fs-lab" type="notjs">
    precision mediump float;
    varying lowp vec4 vColor;

    void main() {
      // gl_FragColor is a special variable a fragment shader
      // is responsible for setting
      // gl_FragColor = vec4(0, 0, 0, 1); // return redish-purple
      gl_FragColor = vColor;
    }

</script>

<script id="vs-answer" type="notjs">
    attribute vec4 position;
    attribute vec4 color;

    uniform vec2 middle;
    uniform float radius;

    varying lowp vec4 vColor;
    varying lowp vec2 vMiddle;
    varying lowp float vRadius;

    void main() {
      vColor = color;
      vMiddle = middle;
      vRadius = radius;

      gl_Position = position;
    } 

</script>
<script id="fs-answer" type="notjs">
    precision mediump float;

    varying lowp vec4 vColor;
    varying lowp vec2 vMiddle;
    varying lowp float vRadius;

    void main() {
      float distance = sqrt( pow( vMiddle.x - gl_FragCoord.x, 2.)  + pow( vMiddle.y - gl_FragCoord.y, 2. ) );
      
      if (vRadius > distance) {
        gl_FragColor = vColor;  
      } else {
        gl_FragColor = vec4(0,0,0,0);
      }      
    }

</script>

<script src="./twgl-full.js"></script>
<script src="./jquery.js"></script>
<script src="./Utils.js"></script>
<script src="./BaseEntity.js"></script>
<script src="./ActionEntity.js"></script>
<script src="./LabEntity.js"></script>
<script src="./EarthEntity.js"></script>
<script src="./AnswerEntity.js"></script>
<script src="./DeadlineEntity.js"></script>
<script src="./HeroEntity.js"></script>
<script src="./FragmentEntity.js"></script>
<script src="./main.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $("#glcanvas").width($(document).height() - 50);
        $("#glcanvas").height($(document).height() - 50);

        main();
    });
</script>

<style>
    #text {
        position: absolute;
        left: 0px;
        top: 0px;
        z-index: 100;
        width: 200px;
    }
</style>

<body>
  <canvas id="glcanvas">
    Your browser doesn't appear to support the
    <code>&lt;canvas&gt;</code> element.
  </canvas>
</body>